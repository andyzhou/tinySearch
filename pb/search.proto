syntax = "proto3";
package search;

option java_package = "com.tc.tinySearch";

///////////////////////
//proto for doc sync
///////////////////////

//message for doc sync request
message DocSyncReq {
    string tag = 1;//index tag
    string docId = 2;//doc id
    bytes json = 3;//doc json byte
}

//message for doc remove request
message DocRemoveReq {
    string tag = 1;//index tag
    repeated string docId = 2;//doc ids
}

//message for doc sync response
message DocSyncResp {
  bool success = 1;
}

///////////////////////
//proto for doc sync
///////////////////////

//message for doc query request
message DocQueryReq {
    string tag = 1;//index tag
    bytes json = 2; //query opt json byte
}

//message for doc query response
message DocQueryResp {
    bool success = 1;
    int32 total = 2;
    repeated bytes recList = 3;//json slice
}

///////////////////////
//define service
///////////////////////
service SearchService {
    //doc query
    rpc DocQuery(DocQueryReq) returns (DocQueryResp);

    //doc remove
    rpc DocRemove(DocRemoveReq) returns (DocSyncResp);

    //doc sync
    rpc DocSync(DocSyncReq) returns (DocSyncResp);
}

